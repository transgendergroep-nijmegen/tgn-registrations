<!DOCTYPE html>
<html ng-app="tgn-registrations" ng-controller="RegistrationsCtrl">
  <head>
    <title>Transgendergroep Nijmegen Inschrijvingen</title>
    <link rel="stylesheet" href="lib/bootstrap.css" />
    <link rel="stylesheet" href="lib/bootstrap-toggle.css" />
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <link
      rel="icon"
      href="http://www.transgendernijmegen.nl/wp-content/uploads/2018/11/transgender-groep-nijmegen-60x60.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      href="http://www.transgendernijmegen.nl/wp-content/uploads/2018/11/transgender-groep-nijmegen.png"
      sizes="192x192"
    />
    <link
      rel="apple-touch-icon"
      href="http://www.transgendernijmegen.nl/wp-content/uploads/2018/11/transgender-groep-nijmegen-180x180.png"
    />
    <style>
      [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
        display: none !important;
      }
    </style>
  </head>

  <body ng-cloak class="text-justify">
    <!-- <div class="alert alert-info text-center" role="alert">
      Op deze pagina kun je je inschrijven voor de activiteiten van de
      Transgendergroep Nijmegen. Bezoek
      <a href="http://www.transgendernijmegen.nl/">onze website</a> voor
      algemene informatie.
    </div> -->

    <div class="alert alert-info" role="alert">
      <span
        class="my-0" 
        ng-if="user && user.emailVerified"
      >
        Ingelogd als <b>{{userInfo.name}}</b>.
      </span>

      <span ng-if="!user">
        Registreer een account of log in om je in te kunnen schrijven voor
        activiteiten.
      </span>

      <span>
        De inschrijvingen sluiten &eacute&eacuten uur voor aanvang van een activiteit.
      </span>
    </div>

    <div class="card">
      <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs" role="tablist">
          <li class="nav-item" role="presentation">
            <a
              class="nav-link px-1 active"
              data-toggle="tab"
              href="#events"
              role="tab"
            >
              <b>Activiteiten</b>
            </a>
          </li>
          <li ng-if="!user" class="nav-item" role="presentation">
            <a
              class="nav-link px-1"
              data-toggle="tab"
              href="#register"
              ng-click="assign('form', {})"
              role="tab"
            >
              Registreren
            </a>
          </li>
          <li ng-if="!user" class="nav-item" role="presentation">
            <a
              class="nav-link px-1"
              data-toggle="tab"
              href="#login"
              ng-click="assign('form', {})"
              role="tab"
            >
              Inloggen
            </a>
          </li>
          <li ng-if="user" class="nav-item dropdown">
            <a
              class="nav-link px-1 dropdown-toggle"
              data-toggle="dropdown"
              href="#"
              role="button"
            >
              Account
            </a>
            <div class="dropdown-menu">
              <a
                class="dropdown-item"
                data-toggle="tab"
                href="#change_info"
                ng-click="assign('form', userInfo)"
              >
                Gegevens wijzigen
              </a>
              <a
                class="dropdown-item"
                data-toggle="tab"
                href="#change_password"
                ng-click="assign('form', {})"
              >
                Wachtwoord wijzigen
              </a>
              <a
                class="dropdown-item"
                data-toggle="tab"
                href="#delete_account"
                ng-click="assign('form', {})"
              >
                Account verwijderen
              </a>
            </div>
          </li>
          <li ng-if="admins[user.uid]" class="nav-item dropdown">
            <a
              class="nav-link px-1 dropdown-toggle"
              data-toggle="dropdown"
              href="#"
              role="button"
            >
              Admin
            </a>
            <div class="dropdown-menu">
              <a
                class="dropdown-item"
                data-toggle="tab"
                href="#admin_signups"
                ng-click="assign('selected_event', null)"
              >
                Inschrijvingen
              </a>
              <a
                class="dropdown-item"
                data-toggle="tab"
                href="#admin_new_event"
                ng-click="assign('form', {})"
              >
                Nieuwe activiteit
              </a>
              <a
                class="dropdown-item"
                data-toggle="tab"
                href="#admin_events"
                ng-click="assign('selected_event', null); assign('edit_event', null);"
              >
                Activiteiten
              </a>
              <a
                class="dropdown-item"
                data-toggle="tab"
                href="#admin_users"
                ng-click="assign('selected_user', null); assign('edit_user', null);"
              >
                Accounts
              </a>
            </div>
          </li>
          <li ng-if="user" class="nav-item" role="presentation">
            <a
              class="nav-link px-1 align-bottom"
              href=""
              ng-click="signout()"
              role="tab"
            >
              Uitloggen
              <svg class="bi" width="16" height="16" fill="currentColor">
                <!-- <use
                  xlink:href="lib/bootstrap-icons.svg#arrow-right-square-fill"
                /> -->
                <path
                  fill-rule="evenodd"
                  d="M2 0a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm2.5 8.5a.5.5 0 010-1h5.793L8.146 5.354a.5.5 0 11.708-.708l3 3a.5.5 0 010 .708l-3 3a.5.5 0 01-.708-.708L10.293 8.5H4.5z"
                />
              </svg>
            </a>
          </li>
        </ul>
      </div>

      <div class="tab-content">
        <div class="tab-pane active" id="events" role="tabpanel">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Datum</th>
                    <th scope="col">Activiteit</th>
                    <th scope="col">Inschrijvingen</th>
                    <th
                      ng-if="user.emailVerified"
                      scope="col"
                      class="text-center"
                    >
                      Jij
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    ng-repeat="event in events | orderBy:'date'"
                    ng-if="now < event.date + EVENT_GRACE && !event.invisible"
                    ng-class="{'table-info': event.signups[user.uid]}"
                  >
                    <td>{{event.date | date:"dd/MM/yyyy"}}</td>
                    <td>
                      <a ng-if="event.link" href="{{event.link}}" target="_blank"
                        >{{event.name}}</a
                      >
                      <span ng-if="!event.link">{{event.name}}</span>
                    </td>
                    <td>
                      <div ng-if="event.no_registrations">
                        Inschrijven niet nodig.
                      </div>
                      <div ng-if="!event.no_registrations" class="row">
                        <div class="col-auto pr-1">
                          <span
                            class="badge badge"
                            ng-class="count_event_signups(event) < event.capacity && now < event.date - EVENT_GRACE ? 'badge-primary' : 'badge-secondary'"
                            style="width: 5em; float: right; text-align: center"
                            >{{count_event_signups(event)}}/{{event.capacity}}</span
                          >
                        </div>
                        <div class="col pl-1">
                          <div class="progress">
                            <div
                              class="progress-bar"
                              ng-class="count_event_signups(event) < event.capacity && now < event.date - EVENT_GRACE ? 'bg-primary' : 'bg-secondary'"
                              role="progressbar"
                              ng-style="{width: (count_event_signups(event) / event.capacity * 100) + '%' }"
                            ></div>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td
                      ng-if="user.emailVerified"
                      class="user-select-none ml-2"
                    >
                      <div
                        ng-if="!event.no_registrations"
                        class="custom-control custom-switch d-flex justify-content-center"
                      >
                        <input
                          type="checkbox"
                          class="custom-control-input"
                          id="customSwitch_{{event.$id}}"
                          ng-model="event.signups[user.uid]"
                          ng-click="set_user_event_status(user.uid, event, $event.target.checked ? true : null)"
                          ng-disabled="now >= event.date - EVENT_GRACE || count_event_signups(event) >= event.capacity && !event.signups[user.uid]"
                        />
                        <label
                          class="custom-control-label"
                          for="customSwitch_{{event.$id}}"
                        ></label>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="register" role="tabpanel">
          <div class="card-body p-0">
            <div class="alert alert-info" role="alert">
              Door het aanmaken van een account geef je ons toestemming om je
              gegevens te bewaren tot je je account verwijderd of maximaal een
              maand na de laatste activiteit waarvoor je was ingeschreven. We
              gebruiken je gegevens uitsluitend voor deze inschrijvingen en om
              zo nodig contact op te nemen in verband met COVID-19.
            </div>
            <div class="alert alert-info" role="alert">
              <p>
                Door je in te schrijven voor een activiteit, en wanneer je een
                activiteit bijwoont, geef je aan dat jouw antwoord op de
                onderstaande vragen 'Nee' is.
              </p>
              <ul class="m-4" style="list-style: disc !important;">
                <li>
                  Heb je last van Hoesten, Benauwdheidsklachten,
                  Neusverkoudheid, of Koorts van 38 graden of hoger?
                </li>
                <li>
                  Heb je op dit moment een huisgenoot met koorts of
                  benauwdheidsklachten?
                </li>
                <li>Heb je het coronavirus in de afgelopen 7 dagen gehad?</li>
                <li>
                  Ben je in thuisisolatie omdat je in direct contact bent
                  geweest met iemand met het coronavirus?
                </li>
                <li>
                  Heb je een huisgenoot met het coronavirus en heb je de
                  afgelopen 14 dagen contact met hen gehad terwijl de persoon in
                  kwestie nog klachten had?
                </li>
              </ul>
              Je gaat er ook mee akkoord om tijdens de activiteit 1.5 meter
              afstand te houden van andere deelnemers.
            </div>
            <div class="alert alert-info" role="alert">
              Het ingevulde e-mailadres wordt ook je inlognaam.
            </div>
            <form class="m-1" id="registerForm" name="registerForm">
              <div class="row form-group">
                <label class="col col-form-label">E-mailadres</label>
                <div class="col">
                  <input
                    type="email"
                    class="form-control"
                    required
                    ng-model="form.email"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Wachtwoord</label>
                <div class="col">
                  <input
                    type="password"
                    class="form-control"
                    required
                    ng-model="form.password"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Naam</label>
                <div class="col">
                  <input
                    type="text"
                    class="form-control"
                    required
                    ng-model="form.name"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Telefoonnummer</label>
                <div class="col">
                  <input
                    type="tel"
                    class="form-control"
                    required
                    ng-model="form.phone"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="registerForm"
                  value="Registreren"
                  class="btn btn-primary w-100 h-100"
                  ng-click="register(form)"
                  ng-disabled="working || registerForm.$invalid"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="login" role="tabpanel">
          <div class="card-body p-0">
            <form class="m-1" id="loginForm" name="loginForm">
              <div class="row form-group">
                <label class="col col-form-label">E-mailadres</label>
                <div class="col">
                  <input
                    type="email"
                    class="form-control"
                    required
                    ng-model="form.email"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Wachtwoord</label>
                <div class="col">
                  <input
                    type="password"
                    class="form-control"
                    required
                    ng-model="form.password"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="loginForm"
                  value="Inloggen"
                  class="btn btn-primary w-100 h-100"
                  ng-click="signin(form)"
                  ng-disabled="working || loginForm.$invalid"
                />
              </div>
              <div class="col">
                <button
                  type="button"
                  class="btn btn-warning w-100 h-100"
                  style="background-color: #ffc107 !important"
                  ng-click="forgotpassword(form)"
                >
                  Wachtwoord vergeten?
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="change_info" role="tabpanel">
          <div class="card-body p-0">
            <h5 class="m-1">Gegevens wijzigen</h5>
            <div class="alert alert-info" role="alert">
              Het ingevulde e-mailadres wordt ook je inlognaam.
            </div>
            <form class="m-1" id="setInfoForm" name="setInfoForm">
              <div class="row form-group">
                <label class="col col-form-label">E-mailadres</label>
                <div class="col">
                  <input
                    type="email"
                    class="form-control"
                    required
                    ng-model="form.email"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Naam</label>
                <div class="col">
                  <input
                    type="text"
                    class="form-control"
                    required
                    ng-model="form.name"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Telefoonnummer</label>
                <div class="col">
                  <input
                    type="tel"
                    class="form-control"
                    required
                    ng-model="form.phone"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Huidig wachtwoord</label>
                <div class="col">
                  <input
                    type="password"
                    class="form-control"
                    required
                    ng-model="form.password"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="setInfoForm"
                  value="Wijzigingen opslaan"
                  class="btn btn-primary w-100 h-100"
                  ng-click="setinfo(form)"
                  ng-disabled="working || setInfoForm.$invalid"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="change_password" role="tabpanel">
          <div class="card-body p-0">
            <h5 class="m-1">Wachtwoord wijzigen</h5>
            <form class="m-1" id="setPasswordForm" name="setPasswordForm">
              <div class="row form-group">
                <label class="col col-form-label">Huidig wachtwoord</label>
                <div class="col">
                  <input
                    type="password"
                    class="form-control"
                    required
                    ng-model="form.password.old"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Nieuw wachtwoord</label>
                <div class="col">
                  <input
                    type="password"
                    class="form-control"
                    required
                    ng-model="form.password.new"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="setPasswordForm"
                  value="Nieuw wachtwoord opslaan"
                  class="btn btn-primary w-100 h-100"
                  ng-click="setpassword(form)"
                  ng-disabled="working || setPasswordForm.$invalid"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="delete_account" role="tabpanel">
          <div class="card-body p-0">
            <h5 class="m-1">Account verwijderen</h5>
            <div class="alert alert-danger" role="alert">
              Weet je zeker dat je je account wilt verwijderen? Dit kan niet
              ongedaan worden gemaakt. Eventuele inschrijvingen voor
              activiteiten worden verwijderd.
            </div>
            <form class="m-1" id="deleteAccountForm" name="deleteAccountForm">
              <div class="row form-group">
                <label class="col col-form-label">Wachtwoord</label>
                <div class="col">
                  <input
                    type="password"
                    class="form-control"
                    required
                    ng-model="form.password"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="deleteAccountForm"
                  value="Account verwijderen"
                  class="btn btn-danger w-100 h-100"
                  style="background-color: #dc3545 !important"
                  ng-click="deleteaccount(form)"
                  ng-disabled="working || deleteAccountForm.$invalid"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="admin_signups" role="tabpanel">
          <div class="card-body p-0">
            <h5 class="m-1">Inschrijvingen</h5>
            <div class="row">
              <select
                class="col custom-select"
                ng-model="selected_event"
                ng-options="eventListName(event) for event in events | orderBy:'date'"
                ng-change="selected_user = null"
              >
                <option value="" disabled selected>
                  Selecteer een activiteit
                </option>
              </select>
              <div class="col-auto my-auto">
                <span>of</span>
              </div>
              <select
                class="col custom-select"
                ng-model="selected_user"
                ng-options="user as user.name+' ('+user.email+')' for user in usersArray | orderBy:'name'"
                ng-change="selected_event = null"
              >
                <option value="" disabled selected>
                  Selecteer een account
                </option>
              </select>
            </div>
            <div ng-if="selected_event">
              <h6>Activiteit: {{eventListName(selected_event)}}</h6>
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Naam</th>
                      <th scope="col">E-mailadres</th>
                      <th scope="col">Telefoonnummer</th>
                      <th scope="col">Uitschrijven</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="(uid, bool) in selected_event.signups">
                      <th scope="row">{{$index+1}}</th>
                      <td>{{users[uid].name}}</td>
                      <td>{{users[uid].email}}</td>
                      <td>{{users[uid].phone}}</td>
                      <td>
                        <a
                          href=""
                          ng-click="set_user_event_status(uid, selected_event, null)"
                        >
                          <svg
                            class="bi text-danger"
                            width="16"
                            height="16"
                            fill="currentColor"
                          >
                            <!-- <use
                              xlink:href="lib/bootstrap-icons.svg#x-square-fill"
                            /> -->
                            <path
                              fill-rule="evenodd"
                              d="M2 0a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm3.354 4.646a.5.5 0 10-.708.708L7.293 8l-2.647 2.646a.5.5 0 00.708.708L8 8.707l2.646 2.647a.5.5 0 00.708-.708L8.707 8l2.647-2.646a.5.5 0 00-.708-.708L8 7.293 5.354 4.646z"
                            />
                          </svg>
                        </a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="row">
                <div class="col">
                  <form class="m-1">
                    <select
                      class="custom-select"
                      ng-model="selected_user"
                      ng-options="user as user.name+' ('+user.email+')' for user in usersArray | orderBy:'name'"
                    >
                      <option value="" disabled selected>
                        Selecteer een account
                      </option>
                    </select>
                  </form>
                </div>
                <div class="col">
                  <button
                    type="button"
                    class="btn btn-primary w-100 h-100"
                    ng-click="set_user_event_status(selected_user.$id, selected_event, true)"
                    ng-disabled="!selected_user"
                  >
                    Inschrijven
                  </button>
                </div>
              </div>
            </div>
            <div ng-if="selected_user">
              <h6>
                Account: {{selected_user.name+' ('+selected_user.email+')'}}
              </h6>
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">Datum</th>
                      <th scope="col">Activiteit</th>
                      <th scope="col">Uitschrijven</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      ng-repeat="event in events | orderBy:'date'"
                      ng-if="event.signups[selected_user.$id]"
                    >
                      <td>{{event.date | date:"dd/MM/yyyy"}}</td>
                      <td>{{event.name}}</td>
                      <td>
                        <a
                          href=""
                          ng-click="set_user_event_status(selected_user.$id, event, null)"
                        >
                          <svg
                            class="bi text-danger"
                            width="16"
                            height="16"
                            fill="currentColor"
                          >
                            <!-- <use
                              xlink:href="lib/bootstrap-icons.svg#x-square-fill"
                            /> -->
                            <path
                              fill-rule="evenodd"
                              d="M2 0a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm3.354 4.646a.5.5 0 10-.708.708L7.293 8l-2.647 2.646a.5.5 0 00.708.708L8 8.707l2.646 2.647a.5.5 0 00.708-.708L8.707 8l2.647-2.646a.5.5 0 00-.708-.708L8 7.293 5.354 4.646z"
                            />
                          </svg>
                        </a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="row">
                <div class="col">
                  <form class="m-1">
                    <select
                      class="custom-select"
                      ng-model="selected_event"
                      ng-options="eventListName(event) for event in events | orderBy:'date'"
                    >
                      <option value="" disabled selected>
                        Selecteer een activiteit
                      </option>
                    </select>
                  </form>
                </div>
                <div class="col">
                  <button
                    type="button"
                    class="btn btn-primary w-100 h-100"
                    ng-click="set_user_event_status(selected_user.$id, selected_event, true)"
                    ng-disabled="!selected_event"
                  >
                    Inschrijven
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="admin_new_event" role="tabpanel">
          <div class="card-body p-0">
            <h5 class="m-1">Nieuwe activiteit</h5>
            <form class="m-1" id="newEventForm" name="newEventForm">
              <div class="row form-group">
                <label class="col col-form-label">Datum</label>
                <div class="col">
                  <input
                    type="datetime-local"
                    class="form-control"
                    required
                    ng-model="form.date"
                    bind-timestamp
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Naam</label>
                <div class="col">
                  <input
                    type="text"
                    class="form-control"
                    required
                    ng-model="form.name"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Link</label>
                <div class="col">
                  <input
                    type="text"
                    class="form-control"
                    ng-model="form.link"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Capaciteit</label>
                <div class="col">
                  <input
                    type="number"
                    pattern="\d*"
                    min="1"
                    class="form-control"
                    ng-model="form.capacity"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Nepinschrijvingen</label>
                <div class="col">
                  <input
                    type="number"
                    pattern="-?\d*"
                    class="form-control"
                    ng-model="form.fake_signups"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Geen inschrijvingen</label>
                <div class="col">
                  <input
                    type="checkbox"
                    class="form-control"
                    ng-model="form.no_registrations"
                  />
                </div>
              </div>
              <div class="row form-group">
                <label class="col col-form-label">Onzichtbaar</label>
                <div class="col">
                  <input
                    type="checkbox"
                    class="form-control"
                    ng-model="form.invisible"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="newEventForm"
                  value="Activiteit aanmaken"
                  class="btn btn-primary w-100 h-100"
                  ng-click="newevent(form)"
                  ng-disabled="working || newEventForm.$invalid"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="admin_events" role="tabpanel">
          <div class="card-body p-0">
            <h5 class="m-1">Activiteiten</h5>
            <form class="m-1">
              <select
                class="custom-select"
                ng-model="selected_event"
                ng-options="eventListName(event) for event in events | orderBy:'date'"
                ng-change="edit_event = copy(selected_event)"
              >
                <option value="" disabled selected>
                  Selecteer een activiteit
                </option>
              </select>
            </form>
            <div ng-if="edit_event" class="mt-3">
              <form class="m-1" id="editEventForm" name="editEventForm">
                <div class="row form-group">
                  <label class="col col-form-label">Datum</label>
                  <div class="col">
                    <input
                      type="datetime-local"
                      class="form-control"
                      required
                      ng-model="edit_event.date"
                      bind-timestamp
                    />
                  </div>
                </div>
                <div class="row form-group">
                  <label class="col col-form-label">Naam</label>
                  <div class="col">
                    <input
                      type="text"
                      class="form-control"
                      required
                      ng-model="edit_event.name"
                    />
                  </div>
                </div>
                <div class="row form-group">
                  <label class="col col-form-label">Link</label>
                  <div class="col">
                    <input
                      type="text"
                      class="form-control"
                      ng-model="edit_event.link"
                    />
                  </div>
                </div>
                <div class="row form-group">
                  <label class="col col-form-label">Capaciteit</label>
                  <div class="col">
                    <input
                      type="number"
                      pattern="\d*"
                      min="1"
                      class="form-control"
                      ng-model="edit_event.capacity"
                    />
                  </div>
                </div>
              <div class="row form-group">
                <label class="col col-form-label">Nepinschrijvingen</label>
                <div class="col">
                  <input
                    type="number"
                    pattern="-?\d*"
                    class="form-control"
                    ng-model="edit_event.fake_signups"
                  />
                </div>
              </div>
                <div class="row form-group">
                  <label class="col col-form-label">Geen inschrijvingen</label>
                  <div class="col">
                    <input
                      type="checkbox"
                      class="form-control"
                      ng-model="edit_event.no_registrations"
                    />
                  </div>
                </div>
                <div class="row form-group">
                  <label class="col col-form-label">Onzichtbaar</label>
                  <div class="col">
                    <input
                      type="checkbox"
                      class="form-control"
                      ng-model="edit_event.invisible"
                    />
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div ng-if="edit_event" class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="editEventForm"
                  value="Wijzigingen opslaan"
                  class="btn btn-primary w-100 h-100"
                  ng-click="editevent(edit_event)"
                  ng-disabled="working || editEventForm.$invalid"
                />
              </div>
              <div class="col">
                <button
                  type="button"
                  class="btn btn-danger w-100 h-100"
                  style="background-color: #dc3545 !important"
                  ng-click="deleteevent(selected_event)"
                >
                  Activiteit verwijderen
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="admin_users" role="tabpanel">
          <div class="card-body p-0">
            <h5 class="m-1">Accounts</h5>
            <form class="m-1">
              <select
                class="custom-select"
                ng-model="selected_user"
                ng-options="user as user.name+' ('+user.email+')' for user in usersArray | orderBy:'name'"
                ng-change="edit_user = copy(selected_user)"
              >
                <option value="" disabled selected>
                  Selecteer een account
                </option>
              </select>
            </form>
            <div ng-if="selected_user" class="mt-3">
              <form class="m-1" id="editAccountForm" name="editAccountForm">
                <div class="row form-group">
                  <label class="col col-form-label">Naam</label>
                  <div class="col">
                    <input
                      type="text"
                      class="form-control"
                      required
                      ng-model="edit_user.name"
                    />
                  </div>
                </div>
                <div class="row form-group">
                  <label class="col col-form-label">Telefoonnummer</label>
                  <div class="col">
                    <input
                      type="tel"
                      class="form-control"
                      required
                      ng-model="edit_user.phone"
                    />
                  </div>
                </div>
                <div ng-if="edit_user.$id != user.uid" class="row form-group">
                  <label class="col col-form-label">Admin</label>
                  <div class="col">
                    <input
                      type="checkbox"
                      class="form-control"
                      ng-model="edit_user.admin"
                      ng-init="edit_user.admin = admins[edit_user.$id]"
                    />
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div ng-if="edit_user" class="card-footer">
            <div class="row">
              <div class="col">
                <input
                  type="submit"
                  form="editAccountForm"
                  value="Wijzigingen opslaan"
                  class="btn btn-primary w-100 h-100"
                  ng-click="edituser(edit_user)"
                  ng-disabled="working || editAccountForm.$invalid"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="toast"
      style="
        position: fixed;
        margin-left: auto;
        margin-right: auto;
        left: 0;
        right: 0;
        top: 0;
        pointer-events: none;
      "
      role="alert"
      data-delay="5000"
    >
      <div class="toast-header">
        <strong class="mr-auto text-left">{{toast_text}}</strong>
        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast">
          <span style="pointer-events: auto">&times;</span>
        </button>
      </div>
    </div>
    <script src="lib/angular.js"></script>
    <script src="lib/firebase.js"></script>
    <script src="lib/angularfire.js"></script>
    <script src="lib/jquery.js"></script>
    <script src="lib/bootstrap.bundle.js"></script>
    <script src="lib/bootstrap-toggle.js"></script>
    <script src="app.js"></script>
  </body>
</html>
